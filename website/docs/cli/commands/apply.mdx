---
page_title: 'Command: apply'
description: >-
  The mnptu apply command executes the actions proposed in a mnptu plan
  to create, update, or destroy infrastructure.
---

# Command: apply

The `mnptu apply` command executes the actions proposed in a mnptu
plan.

> **Hands On:** Try the [Apply mnptu Configuration](/mnptu/tutorials/cli/apply?utm_source=WEBSITE&utm_medium=WEB_IO&utm_offer=ARTICLE_PAGE&utm_content=DOCS) tutorial to learn how mnptu applies a configuration, how mnptu recovers from errors during apply, and common ways to use this command.

## Usage

Usage: `mnptu apply [options] [plan file]`



### Automatic Plan Mode

When you run `mnptu apply` without passing a saved plan file, mnptu automatically creates a new execution plan as if you had run [`mnptu plan`](/mnptu/cli/commands/plan), prompts you to approve that plan, and takes the indicated actions. You can use all of the [planning modes](/mnptu/cli/commands/plan#planning-modes) and
[planning options](/mnptu/cli/commands/plan#planning-options) to customize how mnptu will create the plan.

You can pass the `-auto-approve` option to instruct mnptu to apply the plan without asking for confirmation.

!> **Warning:** If you use `-auto-approve`, we recommend making sure that no one can change your infrastructure outside of your mnptu workflow. This minimizes the risk of unpredictable changes and configuration drift.

### Saved Plan Mode

When you pass a [saved plan file](/mnptu/cli/commands/plan#out-filename) to `mnptu apply`, mnptu takes the actions in the saved plan without prompting you for confirmation. You may want to use this two-step workflow when [running mnptu in automation](/mnptu/tutorials/automation/automate-mnptu?utm_source=WEBSITE&utm_medium=WEB_IO&utm_offer=ARTICLE_PAGE&utm_content=DOCS).

Use [`mnptu show`](/mnptu/cli/commands/show) to inspect a saved plan file before applying it.

When using a saved plan, you cannot specify any additional planning modes or options. These options only affect mnptu's decisions about which
actions to take, and the plan file contains the final results of those
decisions.

### Plan Options

Without a saved plan file, `mnptu apply` supports all planning modes and planning options available for `mnptu plan`.

-  **[Planning Modes](/mnptu/cli/commands/plan#planning-modes):** These include `-destroy`, which creates a plan to destroy all remote objects, and `-refresh-only`, which creates a plan to update mnptu state and root module output values.
- **[Planning Options](/mnptu/cli/commands/plan#planning-options):** These include specifying which resource instances mnptu should replace, setting mnptu input variables, etc.

### Apply Options

The following options change how the apply command executes and reports on the apply operation.

- `-auto-approve` - Skips interactive approval of plan before applying. This
  option is ignored when you pass a previously-saved plan file, because
  mnptu considers you passing the plan file as the approval and so
  will never prompt in that case.

- `-compact-warnings` - Shows any warning messages in a compact form which
  includes only the summary messages, unless the warnings are accompanied by
  at least one error and thus the warning text might be useful context for
  the errors.

- `-input=false` - Disables all of mnptu's interactive prompts. Note that
  this also prevents mnptu from prompting for interactive approval of a
  plan, so mnptu will conservatively assume that you do not wish to
  apply the plan, causing the operation to fail. If you wish to run mnptu
  in a non-interactive context, see
  [Running mnptu in Automation](/mnptu/tutorials/automation/automate-mnptu?utm_source=WEBSITE&utm_medium=WEB_IO&utm_offer=ARTICLE_PAGE&utm_content=DOCS) for some
  different approaches.

- `-json` - Enables the [machine readable JSON UI][machine-readable-ui] output.
  This implies `-input=false`, so the configuration must have no unassigned
  variable values to continue. To enable this flag, you must also either enable
  the `-auto-approve` flag or specify a previously-saved plan.

  [machine-readable-ui]: /mnptu/internals/machine-readable-ui

- `-lock=false` - Don't hold a state lock during the operation. This is
  dangerous if others might concurrently run commands against the same
  workspace.

- `-lock-timeout=DURATION` - Unless locking is disabled with `-lock=false`,
  instructs mnptu to retry acquiring a lock for a period of time before
  returning an error. The duration syntax is a number followed by a time
  unit letter, such as "3s" for three seconds.

- `-no-color` - Disables terminal formatting sequences in the output. Use this
  if you are running mnptu in a context where its output will be
  rendered by a system that cannot interpret terminal formatting.

- `-parallelism=n` - Limit the number of concurrent operation as mnptu
  [walks the graph](/mnptu/internals/graph#walking-the-graph). Defaults to
  10\.

- All [planning modes](/mnptu/cli/commands/plan#planning-modes) and
[planning options](/mnptu/cli/commands/plan#planning-options) for
`mnptu plan` - Customize how mnptu will create the plan. Only available when you run `mnptu apply` without a saved plan file.

For configurations using
[the `local` backend](/mnptu/language/settings/backends/local) only,
`mnptu apply` also accepts the legacy options
[`-state`, `-state-out`, and `-backup`](/mnptu/language/settings/backends/local#command-line-arguments).

## Passing a Different Configuration Directory

mnptu v0.13 and earlier also accepted a directory path in place of the
plan file argument to `mnptu apply`, in which case mnptu would use
that directory as the root module instead of the current working directory.

That usage was deprecated in mnptu v0.14 and removed in mnptu v0.15.
If your workflow relies on overriding the root module directory, use
[the `-chdir` global option](/mnptu/cli/commands#switching-working-directory-with-chdir)
instead, which works across all commands and makes mnptu consistently look
in the given directory for all files it would normally read or write in the
current working directory.

If your previous use of this legacy pattern was also relying on mnptu
writing the `.mnptu` subdirectory into the current working directory even
though the root module directory was overridden, use
[the `TF_DATA_DIR` environment variable](/mnptu/cli/config/environment-variables#tf_data_dir)
to direct mnptu to write the `.mnptu` directory to a location other
than the current working directory.
